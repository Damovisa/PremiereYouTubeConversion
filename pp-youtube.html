<html>

<head>
    <title>Premiere Marker to YouTube Chapter conversion</title>
    <style>
        .flex-container {
            display: flex;
        }
        .flex-child {
            flex: 1;
        }
        .flex-child:first-child {
            margin-right: 20px;
        }
        .flex-child textarea {
            width: 100%;
        }
    </style>
</head>

<body>
    <h1>Premiere Marker to YouTube Chapter conversion</h1>
    <p>In Premiere Pro, export your markers to text
        (File &gt; Export &gt; Markers).<br/>
        Paste the results in the left text area.</br/>
        If you've included the headings, check the box to remove the first line. </p>
    <p style="font-style:italic;">Note: Make sure you have a marker at 0:00, and you're using the Comments rather than the marker name.</p>
    <div class="flex-container">

        <div class="flex-child magenta">
            <h2>Premiere:</h2>
            <textarea id="input" rows="20"></textarea>
        </div>

        <div class="flex-child green">
            <h2>YouTube:</h2>
            <textarea id="output" rows="20"></textarea>
        </div>
    </div>
    <input type="checkbox" id="firstline"></checkbox><label for="firstline">Remove first line</label>

    <script>
        function parsetiming(str) {
            newstr = str.trim();
            split = newstr.split(/\r?\n/);
            if (firstline.checked) split.shift();
            newsplit = []
            startindex = split[0].indexOf('\t') + 3
            split.forEach(s => {
                ns = s.substring(startindex, startindex + 8).trimEnd() + ' ' + s.substring(startindex + 14);
                newsplit.push(ns.trimEnd())
            });
            newstr = newsplit.join('\n');
            return newstr;
        }

        input.oninput = function () {
            output.innerHTML = parsetiming(input.value);
        }
        firstline.oninput = function () {
            output.innerHTML = parsetiming(input.value);
        }
    </script>
</body>

</html>